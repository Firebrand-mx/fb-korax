//------------------------------------------------------------------------------
conitem k22201 22201
{
	name "Daedalon";
	pic con22201;

	var MyState 1 integer 0;

	hello
	{
		say "In my nightmares, I still see Korax in the Dark Crucible." none;
	}

	choice none "You summoned me and I am here."
	if (MyState is 0)
	{
		say Player "You summoned me and I am here." none;
		say "There is a grave danger arising. I heard whispers that the scattered remnants of Korax' forces are being reorganized to march upon us once more." none;
		set MyState 1;
	}

	choice none "You summoned me and I am here."
	if (MyState is 1)
	{
		say Player "You summoned me and I am here." none;
		say "There is a grave danger arising. I heard whispers that the scattered remnants of Korax' forces are being reorganized to march upon us once more." none;
	}

	choice none "You summoned me and I am here."
	if (MyState is 2)
	{
		say Player "You summoned me and I am here." none;
		say "There is a grave danger arising. I heard whispers that the scattered remnants of Korax' forces are being reorganized to march upon us once more." none;
	}

	choice none "How do I stave off this threat?"
	if (MyState is 1)
	{
		say Player "How can I help?" none;
		say "Far to the east, there is a ruined city in the desert. Somewhere in that city, there is supposed to be a tablet telling the legend of the Serpent Riders." none;
		Player.RemoveInventory( TrackerQuestAA0 );
		Player.GiveInventory( TrackerQuestAA1 );
		Player.GiveInventory( TrackerMapBB );
		Player.GiveConstitution( 3 );
		executems 22 3;
		set MyState 2;
	}

	choice none "How do I stave off this threat?"
	if (MyState is 2)
	{
		say Player "How can I help?" none;
		say "Far to the east, there is a ruined city in the desert. Somewhere in that city, there is supposed to be a tablet telling the legend of the Serpent Riders." none;
	}

	choice none "What's with all the portals?"
	{
		say Player "What's with all the portals?" none;
		say "To facilitate faster travel, the three mage towers in the wilds of Charybdea are linked to each other with portals. Feel free to use them as necessary." none;
	}

	choice none "I need more mana."
	if (Player.HasInventory( ClassIdentifierMage ))
	{
		say Player "I need more mana." none;
		Player.GiveInventory( KRPGMana1 , 200 );
		Player.GiveInventory( KRPGMana2 , 200 );
		Player.GiveInventory( RedMana , 200 );
		say "There you go." none;
	}

	choice none "Time to go."
	{
		end;
	}

}
//------------------------------------------------------------------------------
conitem k22202 22202
{
	name "Daedalon";
	pic con22201;

	var MyState 1 integer 0;

	hello
	{
		say "You are tracking sand all over my floors. Hope you have something to show for it." none;
	}


	choice none "I transcribed the tablet I found."
	if (MyState is 0)
	{
		say Player "I transcribed the tablet I found in Nisisil Crucible." none;
		say "You seem to have what it takes. Give me a few moments to decipher this." none;
		Player.RemoveInventory( TrackerQuestAA2 );
		Player.GiveInventory( TrackerQuestAA3 );
		Player.GiveLevels( 1 );
		set MyState 1;
		terminate;
	}

	choice none "What does the tablet say?"
	if (MyState is 1)
	{
		say Player "What does the tablet say?" none;
		say "Bad news... it seems that not only was the coming of Korax foretold, but also that killing him in the Dark Crucible only destroyed his body, not his soul.",,
		"The tablet also foretells that after Korax' death a cult will emerge to recall his soul into this world. The name of this cult: ",,
		"Korax' Heritage." none;
		set MyState 2;
	}

	choice none "What does the tablet say?"
	if (MyState is 2)
	{
		say Player "What does the tablet say?" none;
		say "Bad news... it seems that not only was the coming of Korax foretold, but also that killing him in the Dark Crucible only destroyed his body, not his soul.",,
		"The tablet also foretells that after Korax' death a cult will emerge to recall his soul into this world. The name of this cult: ",,
		"Korax' Heritage." none;
	}

	choice none "What does the tablet say?"
	if (MyState is 3)
	{
		say Player "What does the tablet say?" none;
		say "Bad news... it seems that not only was the coming of Korax foretold, but also that killing him in the Dark Crucible only destroyed his body, not his soul.",,
		"The tablet also foretells that after Korax' death a cult will emerge to recall his soul into this world. The name of this cult: ",,
		"Korax' Heritage." none;
	}

	choice none "What does the tablet say?"
	if (MyState is 4)
	{
		say Player "What does the tablet say?" none;
		say "Bad news... it seems that not only was the coming of Korax foretold, but also that killing him in the Dark Crucible only destroyed his body, not his soul.",,
		"The tablet also foretells that after Korax' death a cult will emerge to recall his soul into this world. The name of this cult: ",,
		"Korax' Heritage." none;
	}

	choice none "So what's the next step?"
	if (MyState is 2)
	{
		say Player "So what's the next step?" none;
		say "To eliminate the cult's leaders, we have to find out where they are hiding. There is a good chance you can find this information in the Heresiarch's Seminary.",,
		"I can teleport you there any time, let me know whenever you are ready." none;
		Player.RemoveInventory( TrackerQuestAB0 );
		Player.GiveInventory( TrackerQuestAB1 );
		Player.GiveConstitution( 1 );
		set MyState 3;
	}

	choice none "So what's the next step?"
	if (MyState is 3)
	{
		say Player "So what's the next step?" none;
		say "To eliminate the cult's leaders, we have to find out where they are hiding. There is a good chance you can find this information in the Heresiarch's Seminary.",,
		"I can teleport you there any time, let me know whenever you are ready." none;
	}


	choice none "So what's the next step?"
	if (MyState is 4)
	{
		say Player "So what's the next step?" none;
		say "To eliminate the cult's leaders, we have to find out where they are hiding. There is a good chance you can find this information in the Heresiarch's Seminary.",,
		"I can teleport you there any time, let me know whenever you are ready." none;
	}

	choice none "Heresiarch's Seminary"
	if (MyState is 3)
	{
		say Player "I'm ready for you to teleport me to the Heresiarch's Seminary." none;
		say "Hang on to your skivvies, this might hurt a bit." none;
		Player.TeleportToMap(68);
		terminate;
	}

	choice none "Heresiarch's Seminary"
	if (MyState is 4)
	{
		say Player "I'm ready for you to teleport me to the Heresiarch's Seminary." none;
		say "Hang on to your skivvies, this might hurt a bit." none;
		Player.TeleportToMap(68);
		terminate;
	}

	choice none "What's with all the portals?"
	{
		say Player "What's with all the portals?" none;
		say "To facilitate faster travel, the three mage towers in the wilds of Charybdea are linked to each other with portals. Feel free to use them as necessary." none;
	}

	choice none "I need more mana."
	if (Player.HasInventory( ClassIdentifierMage ))
	{
		say Player "I need more mana." none;
		Player.GiveInventory( KRPGMana1 , 200 );
		Player.GiveInventory( KRPGMana2 , 200 );
		Player.GiveInventory( RedMana , 200 );
		say "There you go." none;
	}

	choice none "I need a minute."
	if (MyState is 0)
	{
		end;
	}

	choice none "I need a minute."
	if (MyState is 1)
	{
		end;
	}

	choice none "I need a minute."
	if (MyState is 2)
	{
		end;
	}

	choice none "I need a minute."
	if (MyState is 3)
	{
		executems 22 3;
		set MyState 4;
		end;
	}

	choice none "I need a minute."
	if (MyState is 4)
	{
		end;
	}
}
//------------------------------------------------------------------------------
conitem k22203 22203
{
	name "Daedalon";
	pic con22201;

	var MyState 1 integer 0;

	hello
	{
		say "Evil is drawing closer every moment you delay." none;
	}

	choice none "I found this book."
	if (MyState is 0)
	{
		if (Player.HasInventory( ClassIdentifierMage ))
		{
		say Player "I found this book in the Heresiarch's Seminary." none;
		say "The Daemon Codex! Give me some time to study it.",,
		"In the meantime, you should visit Spellmaster Sallazar in Thystes Academy, he'll teach you a powerful new auxiliary spell." none;
		Player.RemoveInventory( TrackerQuestAB2 );
		Player.GiveInventory( TrackerQuestAB3 );
		Player.GiveInventory( MSpell5Voucher );
		set MyState 1;
		terminate;
		}
		else
		{
		say Player "I found this book in the Heresiarch's Seminary." none;
		say "The Daemon Codex! Give me a few moments to study it.",,
		"Take this gold and replenish your supplies in the meantime." none;
		Player.RemoveInventory( TrackerQuestAB2 );
		Player.GiveInventory( TrackerQuestAB3 );
		Player.GiveInventory( Coin, 250 );
		set MyState 1;
		terminate;
		}
	}

	choice none "So where am I heading now?"
	if (MyState is 1)
	{
		say Player "So where is the cult located? Where am I heading now?" none;
		say "It seems they are in the 'Dark Conclave', an underground structure connecting the overworld and the underworld.",,
		"To get there, you need to cross The Chasm south of The Border Post and explore The Canyon until you find the entrance to the rift.",,
		"Descend into the rift to enter the Dark Conclave." none;
		Player.RemoveInventory( TrackerQuestAC0 );
		Player.GiveInventory( TrackerQuestAC1 );
		Player.GiveInventory( TrackerMapDB );
		Player.GiveInventory( TrackerMapDC );
		Player.GiveInventory( TrackerMapDI );
		Player.GiveInventory( TrackerMapDM );
		Player.GiveConstitution( 5 );
		executems 22 3;
	}

	choice none "What's with all the portals?"
	{
		say Player "What's with all the portals?" none;
		say "To facilitate faster travel, the three mage towers in the wilds of Charybdea are linked to each other with portals. Feel free to use them as necessary." none;
	}

	choice none "I need more mana."
	if (Player.HasInventory( ClassIdentifierMage ))
	{
		say Player "I need more mana." none;
		Player.GiveInventory( KRPGMana1 , 200 );
		Player.GiveInventory( KRPGMana2 , 200 );
		Player.GiveInventory( RedMana , 200 );
		say "There you go." none;
	}

	choice none "Time to descend to hell."
	{
		end;
	}

}